/*!
  Copyright 2013 The Impact Plus. All rights reserved.

  YOU ARE PERMITTED TO:
  * Transfer the Software and license to another party if the other party agrees to accept the terms and conditions of this License Agreement. The license holder is responsible for a transfer fee of $50.95 USD. The license must be at least 90 days old or not transferred within the last 90 days;
  * Modify source codes of the software and add new functionality that does not violate the terms of the current license;
  * Customize the Software's design and operation to suit the internal needs of your web site except to the extent not permitted under this Agreement;
  * Create, sell and distribute applications/modules/plugins which interface (not derivative works) with the operation of the Software provided the said applications/modules/plugins are original works or appropriate 3rd party license(s) except to the extent not permitted under this Agreement;
  * Create, sell and distribute by any means any templates and/or designs/skins which allow you or other users of the Software to customize the appearance of Impact Plus provided the said templates and or designs/skins are original works or appropriate 3rd party license(s) except to the extent not permitted under this Agreement.

  YOU ARE "NOT" PERMITTED TO:
  * Use the Software in violation of any US/India or international law or regulation.
  * Permit other individuals to use the Software except under the terms listed above;
  * Reverse-engineer and/or disassemble the Software for distribution or usage outside your domain if it is not an unlimited licence version;
  * Use the Software in such as way as to condone or encourage terrorism, promote or provide pirated Software, or any other form of illegal or damaging activity;
  * Distribute individual copies of proprietary files, libraries, or other programming material in the Software package.
  * Distribute or modify proprietary graphics, HTML, or CSS packaged with the Software for use in applications other than the Software;
  * Use the Software in more than one instance or location (URL, domain, sub-domain, etc.) without prior written consent from IMPACT PLUS;
  * Modify the software and/or create applications and modules which allow the Software to function in more than one instance or location (URL, domain, sub-domain, etc.) without prior written consent from IMPACT PLUS;
  * Copy the Software and install that single program for simultaneous use on multiple machines without prior written consent from IMPACT PLUS;
*/(function(b){var a={init:function(c){var e={distance:"1px",start:"top",railDraggable:true,allowPageScroll:false,wheelStep:20,touchScrollStep:200,wrapper:false,minBarHeight:30,alwaysVisible:false,gripper:"whiteGripper"};var d=b.extend({},e,c);this.filter("*:not(.scrollbar-initialized)").each(function(){var o=b(this),h=(d.wrapper)?o.parents(d.wrapper):false,n;if(h&&h.length){var j=h.cn("div",{"class":"uiScrollableAreaTrack"}),p=j.cn("div",{"class":"uiScrollableAreaGripper"}).addClass(d.gripper)}else{if(o.parents(".uiSelectorMenuWrapper:first").length){var h=o.parents(".uiSelectorMenuWrapper:first");var j=b("<div />",{"class":"uiScrollableAreaTrack"}).appendTo(h);var p=b("<div />",{"class":"uiScrollableAreaGripper"}).appendTo(j).addClass(d.gripper)}else{if(o.hasClass("ipNubFlyoutBody")){var h=o.wrap(b("<div />",{"class":"ipNubFlyoutBodyOuter"})).parent();var j=b("<div />",{"class":"uiScrollableAreaTrack"}).appendTo(h);var p=b("<div />",{"class":"uiScrollableAreaGripper"}).appendTo(j)}else{var k=b("<div />",{"class":"uiScrollableAreaWithShadow uiScrollableAreaWithTopShadow uiScrollableArea"}),i=b("<div />",{"class":"uiScrollableAreaWrap scrollable"}).appendTo(k),g=b("<div />",{"class":"uiScrollableAreaBody"}).appendTo(i),q=b("<div />",{"class":"uiScrollableAreaContent"}).appendTo(g);o.wrap(k);o=b(o.parents(".uiScrollableAreaWrap:first").get(0));var h=o.parents(".uiScrollableArea:first");var j=b("<div />",{"class":"uiScrollableAreaTrack"}).appendTo(h);var p=b("<div />",{"class":"uiScrollableAreaGripper"}).appendTo(j).addClass(d.gripper)}}o.addClass("scrollbar-initialized")}o.data({wrapper:h,rail:j,bar:p,options:d});if(d.railDraggable&&b.ui&&typeof(b.ui.draggable)==="function"){p.draggable({axis:"y",containment:"parent",scroll:true,refreshPositions:true,start:function(){o.addClass("contentScrolling")},stop:function(){o.removeClass("contentScrolling");o.ipscroll("hideBar")},drag:function(r){o.ipscroll("scrollContent",0,b(this).position().top)}})}j.on("mouseenter",function(){j.addClass("trackHover");o.ipscroll("showBar")}).on("mouseleave",function(){j.removeClass("trackHover");o.ipscroll("hideBar")});p.on("mouseenter",function(){p.addClass("gripperHover");p.stop(true,true).fadeIn("fast")}).on("mouseleave",function(){p.removeClass("gripperHover")});o.on("mouseenter",function(){o.addClass("scrollPanelHover");o.ipscroll("fadeBar")}).on("mouseleave",function(){o.removeClass("scrollPanelHover");j.removeClass("trackHover");p.removeClass("gripperHover");o.ipscroll("hideBar")});o.bind("touchstart",function(s,r){if(s.originalEvent.touches.length){n=s.originalEvent.touches[0].pageY}}).bind("touchmove",function(s){s.originalEvent.preventDefault();if(s.originalEvent.touches.length){var r=(n-s.originalEvent.touches[0].pageY)/d.touchScrollStep;b(this).ipscroll("scrollContent",r,true)}});var m=function(s){if(!o.hasClass("scrollPanelHover")){return}var s=s||window.event;var t=0;if(s.wheelDelta){t=-s.wheelDelta/120}if(s.detail){t=s.detail/3}var r=s.target||s.srcTarget||s.srcElement;if(b(r).closest(".scrollPanelHover").is(o)){o.addClass("contentScrolling");p.stop().show(0);o.ipscroll("scrollContent",t,true)}if(s.preventDefault){s.preventDefault()}s.returnValue=false;o.ipscroll("hideBar").removeClass("contentScrolling")};var f=function(){if(window.addEventListener){this.addEventListener("DOMMouseScroll",m,false);this.addEventListener("mousewheel",m,false)}else{document.attachEvent("onmousewheel",m)}};f();var l=function(v){v.preventDefault();if(!b(v.target).is(this)){return}var x=v.offsetY;var s=j.outerHeight();var t=p.outerHeight();var r=Math.max(0,(j.outerHeight()-p.outerHeight()+1));var u=0;var w=Math.max(u,Math.min(r,(x-(t/2))));p.stop().animate({top:w+"px"},100,function(){o.ipscroll("scrollContent",0,w,false)})};j.on("click",l);o.ipscroll("fadeBar").ipscroll("getBarHeight")});return this},update:function(){var e=b(this);var f=e.data("rail");var d=e.data("bar");e.ipscroll("getBarHeight");var c=Math.max(0,(f.outerHeight()-d.outerHeight()));if(parseInt(d.css("top"))>c){d.css("top",c+"px");e.ipscroll("scrollContent",parseInt(c))}},scrollContent:function(m,h,i,n){var k=b(this),c=b(this).data("wrapper"),d=b(this).data("rail"),l=b(this).data("bar"),f=b(this).data("options");var o=m,g=(d.outerHeight()-l.outerHeight()),j;if(h){o=parseInt(l.css("top"))+m*parseInt(f.wheelStep)/100*l.outerHeight();o=Math.min(Math.max(o,0),g);o=(m>0)?Math.ceil(o):Math.floor(o);l.css({top:o+"px"})}j=parseInt(l.css("top"))/(d.outerHeight()-l.outerHeight());o=j*(k[0].scrollHeight-k.outerHeight());if(i){o=m;var e=o/k[0].scrollHeight*k.outerHeight();e=Math.min(Math.max(e,0),g);l.css({top:e+"px"})}if(parseInt(o)===k.scrollTop()){return}if(n!==true){var p=Math.floor(j*100);if(p<=0){c.removeClass("contentBefore").addClass("contentAfter");if(typeof f.onTotalScrollBack==="function"){call_user_func_array(f.onTotalScrollBack,[p])}}else{if(p>=98){c.removeClass("contentAfter").addClass("contentBefore");if(typeof f.onTotalScroll==="function"){call_user_func_array(f.onTotalScroll,[p])}}else{c.addClass("contentBefore contentAfter");if(typeof f.onScroll==="function"){call_user_func_array(f.onScroll,[p])}}}}k.data("lastScroll",o).scrollTop(o).ipscroll("showBar");return this},getBarHeight:function(){var e=b(this),d=b(this).data("bar"),c=b(this).data("options");var g=Math.max((e.outerHeight()/e[0].scrollHeight)*e.outerHeight()-3,c.minBarHeight);d.css({height:g+"px"});var f=(g==e.outerHeight())?"none":"block";return this},fadeBar:function(){b(this).ipscroll("showBar",true);return this},showBar:function(h){b(this).ipscroll("getBarHeight");var e=b(this),i=b(this).data("wrapper"),g=b(this).data("rail"),d=b(this).data("bar"),c=b(this).data("options"),f=d.height();i.addClass("hasScrollbar");if((f+5)>=e.outerHeight()){i.removeClass("hasScrollbar");return this}d.stop(true,true).fadeIn("fast");if(e.hasClass("scrollPanelHover")&&(!d.hasClass("gripperHover")&&!g.hasClass("trackHover"))&&!e.hasClass("contentScrolling")){d.stop(true,true).css({width:"5px",opacity:1});g.stop(true,true).css({width:"5px",background:"transparent"})}if(d.hasClass("gripperHover")||g.hasClass("trackHover")){d.stop(true,true).animate({width:"8px",opacity:1},100,function(){g.css({width:"10px",background:"rgba(0, 0, 0, 0.15)"})})}if(h){b(this).ipscroll("hideBar")}return this},hideBar:function(){b(this).ipscroll("getBarHeight");var e=b(this),h=b(this).data("wrapper"),g=b(this).data("rail"),d=b(this).data("bar"),c=b(this).data("options"),f=d.height();h.removeClass("hasScrollbar");if((f+3)>=e.outerHeight()){d.stop(true,true).css({opacity:0,width:"5px"});return this}if(!c.alwaysVisible){if(!e.hasClass("scrollPanelHover")&&!d.hasClass("gripperHover")&&!g.hasClass("trackHover")&&!e.hasClass("contentScrolling")){d.stop(true,true).css({opacity:1}).delay(1000).animate({width:"5px",opacity:0},300);g.stop(true,true).css({width:"5px",background:"transparent"})}}return this},scrollToTop:function(){b(this).ipscroll("showBar");b(this).ipscroll("getBarHeight");var c=b(this).data("bar");c.css({top:"0px"});b(this).ipscroll("scrollContent",0,false,false,true);b(this).ipscroll("hideBar");return this},scrollTo:function(g){var d=b(this);var f=b(this).data("rail");var c=b(this).data("bar");if(g instanceof jQuery){var e=g.position().top;if(d.scrollTop()>e){e=parseInt(d.scrollTop()-e)}else{e=parseInt(e-d.scrollTop())}}else{if(!isNaN(parseInt(g))){var e=parseInt(g)}else{if(b(g).length){var e=b(g).position().top;if(d.scrollTop()>e){e=parseInt(d.scrollTop()-e)}else{e=parseInt(e-d.scrollTop())}}}}if(isNaN(e)){return this}d.ipscroll("scrollContent",e,false,true,true);return this},scrollToBottom:function(){b(this).ipscroll("showBar");b(this).ipscroll("getBarHeight");var e=b(this).data("rail");var c=b(this).data("bar");var d=(b(this).outerHeight()-c.outerHeight());c.css({top:d});b(this).ipscroll("scrollContent",0,true,false,true);b(this).ipscroll("hideBar");return this}};b.fn.extend({ipscroll:function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.ipscroll")}}}})})(jQuery);