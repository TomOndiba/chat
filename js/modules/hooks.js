/*!
  Copyright 2013 The Impact Plus. All rights reserved.

  YOU ARE PERMITTED TO:
  * Transfer the Software and license to another party if the other party agrees to accept the terms and conditions of this License Agreement. The license holder is responsible for a transfer fee of $50.95 USD. The license must be at least 90 days old or not transferred within the last 90 days;
  * Modify source codes of the software and add new functionality that does not violate the terms of the current license;
  * Customize the Software's design and operation to suit the internal needs of your web site except to the extent not permitted under this Agreement;
  * Create, sell and distribute applications/modules/plugins which interface (not derivative works) with the operation of the Software provided the said applications/modules/plugins are original works or appropriate 3rd party license(s) except to the extent not permitted under this Agreement;
  * Create, sell and distribute by any means any templates and/or designs/skins which allow you or other users of the Software to customize the appearance of Impact Plus provided the said templates and or designs/skins are original works or appropriate 3rd party license(s) except to the extent not permitted under this Agreement.

  YOU ARE "NOT" PERMITTED TO:
  * Use the Software in violation of any US/India or international law or regulation.
  * Permit other individuals to use the Software except under the terms listed above;
  * Reverse-engineer and/or disassemble the Software for distribution or usage outside your domain if it is not an unlimited licence version;
  * Use the Software in such as way as to condone or encourage terrorism, promote or provide pirated Software, or any other form of illegal or damaging activity;
  * Distribute individual copies of proprietary files, libraries, or other programming material in the Software package.
  * Distribute or modify proprietary graphics, HTML, or CSS packaged with the Software for use in applications other than the Software;
  * Use the Software in more than one instance or location (URL, domain, sub-domain, etc.) without prior written consent from IMPACT PLUS;
  * Modify the software and/or create applications and modules which allow the Software to function in more than one instance or location (URL, domain, sub-domain, etc.) without prior written consent from IMPACT PLUS;
  * Copy the Software and install that single program for simultaneous use on multiple machines without prior written consent from IMPACT PLUS;
*/;var ipHooks=Backbone.Model.extend({initialize:function(a){this.filters={};this.merged_filters={};this.actions={};this.current_filter=[]},add_action:function(c,e,d,b){d=d||10;b=b||false;var a=this._filter_build_unique_id(c,e,d);this.filters[c]=this.filters[c]||{};this.filters[c][d]=this.filters[c][d]||{};this.filters[c][d][a]={"function":e,accepted_args:b};delete this.merged_filters[c];return true},remove_action:function(a,d,b){b=b||10;d=this._filter_build_unique_id(a,d,b);var c=(this.filters[a]!=undefined&&filters[a][b]!=undefined&&this.filters[a][b][d]!=undefined);if(true===c){delete this.filters[a][b][d];if(this.empty(this.filters[a][b])){delete this.filters[a][b]}delete this.merged_filters[a]}return c},remove_all_action:function(a,b){b=b||false;if(this.isset(this.filters[a])){if(false!==b&&this.isset(this.filters[a][b])){delete this.filters[a][b]}else{delete this.filters[a]}}if(isset(this.merged_filters[a])){delete this.merged_filters[a]}return true},has_action:function(b,e){e=e||false;var d=!this.empty(this.filters[b]),a=false;if(false===e||false==d){return d}a=this._filter_build_unique_id(b,e,false);if(!a){return false}var c=this.array_keys(this.filters[b]);for(priority in c){if(this.filters[b]!=undefined&&this.filters[b][c[priority]]!=undefined&&this.filters[b][c[priority]][a]!=undefined){return c[priority]}}return false},apply_filters:function(a,d){var c={};if(this.isset(this.filters.all)){this.current_filter.push(a);c=this.func_get_args();this.__call_all_hook(c)}if(!this.isset(this.filters[a])){if(this.isset(this.filters.all)){this.current_filter=this.array_pop(this.current_filter)}return d}if(!this.isset(this.filters.all)){this.current_filter=(!this.is_array(this.current_filter)&&!this.empty(this.current_filter))?[this.current_filter]:[];this.current_filter.push(a)}if(!this.isset(this.merged_filters[a])){this.filters[a]=this.ksort(this.filters[a]);this.merged_filters[a]=true}this.filters[a]=this.reset(this.filters[a]);if(this.empty(c)){c=this.func_get_args();c.shift()}do{var b=this.current(this.filters[a]);if(this.is_object(b)&&b["function"]!=undefined){if(this.is_callable(b["function"])){var e=parseInt(b.accepted_args);e=(!isNaN(e)&&e>0)?this.array_slice(c,0,e):c;d=this.call_user_func_array(b["function"],e)}}}while(this.next(this.filters[a])!=false);this.current_filter=this.array_pop(this.current_filter);return d},filter_current:function(){return this.end(this.current_filter)},do_action:function(k,g,i){i=(i===undefined)?"":i;var c;if(!this.isset(this.actions)){this.actions={}}if(!this.isset(this.actions[k])){this.actions[k]=1}else{++this.actions[k]}if(this.isset(this.filters.all)){this.current_filter.push(k);var d=this.func_get_args();this._call_all_hook(d)}if(!this.isset(this.filters[k])){if(this.isset(this.filters.all)){this.current_filter=this.array_pop(this.current_filter)}return}if(!this.isset(this.filters.all)){this.current_filter=(!this.is_array(this.current_filter)&&!this.empty(this.current_filter))?[this.current_filter]:[];this.current_filter.push(k)}var e=[];if(this.is_array(i)&&1==this.count(i)&&this.isset(i[0])&&this.is_object(i[0])){e.push(i[0])}else{e.push(i)}for(var f=3;f<this.func_num_args();f++){e.push(this.func_get_arg(f))}if(!this.isset(this.merged_filters[k])){this.filters[k]=this.ksort(this.filters[k]);this.merged_filters[k]=true}if(!unds.isEmpty(this.filters[k])){for(priority in this.filters[k]){var j=this.filters[k][priority];if(!unds.isEmpty(j)){for(idx in j){var b=j[idx];if(this.is_object(b)&&b["function"]!=undefined){if(this.is_callable(b["function"])){e=(unds.isEmpty(e))?[]:e;e=(!b.accepted_args)?e:this.array_slice(e,0,b.accepted_args);var h=this.call_user_func_array(b["function"],e);if(g){c=c||"";c=h}else{c=c||[];c.push(h)}}}}}}}this.current_filter=(!unds.isArray(this.current_filter)&&!unds.isEmpty(this.current_filter))?[this.current_filter]:[];this.current_filter=this.array_pop(this.current_filter);return c},did_action:function(a){if(!this.isset(this.actions)||!this.isset(this.actions[a])){return 0}return this.actions[a]},_filter_build_unique_id:function(a,c,b){return unds.uniqueId()},__call_all_hook:function(b){this.filters.all=this.reset(this.filters.all);do{var a=this.current(this.filters.all);if(this.is_object(a)&&a["function"]!=undefined){if(this.is_callable(a["function"])){this.call_user_func_array(a["function"],b)}}}while(this.next(this.filters.all)!==false)},count:function(c,d){var b,a=0;if(c===null||typeof c==="undefined"){return 0}else{if(c.constructor!==Array&&c.constructor!==Object){return 1}}if(d==="COUNT_RECURSIVE"){d=1}if(d!=1){d=0}for(b in c){if(c.hasOwnProperty(b)){a++;if(d==1&&c[b]&&(c[b].constructor===Array||c[b].constructor===Object)){a+=this.count(c[b],1)}}}return a},empty:function(d){var e,c,b,a;var f=[e,null,false,0,"","0"];a=f.length;for(b=0;b<a;b++){if(d===f[b]){return true}}if(typeof d==="object"){for(c in d){return false}return true}return false},isset:function(){var c=arguments,b=c.length,d=0,e;if(b===0){throw new Error("Empty isset")}while(d!==b){if(c[d]===e||c[d]===null){return false}d++}return true},is_string:function(a){return(typeof(a)=="string")},is_object:function(a){if(Object.prototype.toString.call(a)==="[object Array]"){return false}return(a!==null&&typeof a==="object")},is_array:function(c){var b,d=function(f){var e=(/\W*function\s+([\w\$]+)\s*\(/).exec(f);if(!e){return"(Anonymous)"}return e[1]},a=function(f){if(!f||typeof f!=="object"||typeof f.length!=="number"){return false}var e=f.length;f[f.length]="bogus";if(e!==f.length){f.length-=1;return true}delete f[f.length];return false};if(!c||typeof c!=="object"){return false}this.php_js=this.php_js||{};this.php_js.ini=this.php_js.ini||{};b=this.php_js.ini["phpjs.objectsAsArrays"];return a(c)||((!b||((parseInt(b.local_value,10)!==0&&(!b.local_value.toLowerCase||b.local_value.toLowerCase()!=="off"))))&&(Object.prototype.toString.call(c)==="[object Object]"&&d(c.constructor)==="Object"))},get_class:function(b){if(b&&typeof b==="object"&&Object.prototype.toString.call(b)!=="[object Array]"&&b.constructor&&b!==this.window){var a=b.constructor.toString().match(/function\s*(\w+)/);if(a&&a.length===2){return a[1]}}return false},array_keys:function(c,e,h){var g=typeof e!=="undefined",d=[],b=!!h,a=true,f="";if(c&&typeof c==="object"&&c.change_key_case){return c.keys(e,h)}for(f in c){if(c.hasOwnProperty(f)){a=true;if(g){if(b&&c[f]!==e){a=false}else{if(c[f]!=e){a=false}}}if(a){d[d.length]=f}}}return d},func_get_args:function(){if(!arguments.callee.caller){try{throw new Error('Either you are using this in a browser which does not support the "caller" property or you are calling this from a global context')}catch(a){return false}}return Array.prototype.slice.call(arguments.callee.caller.arguments)},func_num_args:function(){if(!arguments.callee.caller){try{throw new Error('Either you are using this in a browser which does not support the "caller" property or you are calling this from a global context')}catch(a){return false}}return arguments.callee.caller.arguments.length},func_get_arg:function(a){if(!arguments.callee.caller){try{throw new Error('Either you are using this in a browser which does not support the "caller" property or you are calling this from a global context')}catch(c){return false}}if(a>arguments.callee.caller.arguments.length-1){try{throw new Error("Argument number is greater than the number of arguments actually passed")}catch(b){return false}}return arguments.callee.caller.arguments[a]},array_pop:function(d){var c="",a="";if(d.hasOwnProperty("length")){if(!d.length){return null}return d.pop()}else{for(c in d){if(d.hasOwnProperty(c)){a=c}}if(a){var b=d[a];delete (d[a]);return b}else{return null}}},ksort:function(b,l){var c={},h=[],j,e,d,f=this,g=false,a={};j=function(k,i){var p=parseFloat(k),m=parseFloat(i),o=p+""===k,n=m+""===i;if(o&&n){return(p>m)?1:((p<m)?-1:0)}else{if(o&&!n){return 1}else{if(!o&&n){return -1}}}return(k>i)?1:((k<i)?-1:0)};for(d in b){if(b.hasOwnProperty(d)){h.push(d)}}h.sort(j);this.php_js=this.php_js||{};this.php_js.ini=this.php_js.ini||{};g=this.php_js.ini["phpjs.strictForIn"]&&this.php_js.ini["phpjs.strictForIn"].local_value&&this.php_js.ini["phpjs.strictForIn"].local_value!=="off";a=(g)?b:a;for(e=0;e<h.length;e++){d=h[e];c[d]=b[d];if(g){delete b[d]}}for(e in c){if(c.hasOwnProperty(e)){a[e]=c[e]}}return g||a},reset:function(a){this.php_js=this.php_js||{};this.php_js.pointers=this.php_js.pointers||[];var e=function(h){for(var f=0,g=this.length;f<g;f++){if(this[f]===h){return f}}return -1};var c=this.php_js.pointers;if(!c.indexOf){c.indexOf=e}if(c.indexOf(a)===-1){c.push(a,0)}var d=c.indexOf(a);if(Object.prototype.toString.call(a)!=="[object Array]"){for(var b in a){if(c.indexOf(a)===-1){c.push(a,0)}else{c[d+1]=0}return a[b]}return false}if(a.length===0){return false}c[d+1]=0;return a[c[d+1]]},current:function(a){this.php_js=this.php_js||{};this.php_js.pointers=this.php_js.pointers||[];var f=function(k){for(var h=0,j=this.length;h<j;h++){if(this[h]===k){return h}}return -1};var c=this.php_js.pointers;if(!c.indexOf){c.indexOf=f}if(c.indexOf(a)===-1){c.push(a,0)}var e=c.indexOf(a);var g=c[e+1];if(Object.prototype.toString.call(a)==="[object Array]"){return a[g]||false}var d=0;for(var b in a){if(d===g){return a[b]}d++}return false},next:function(a){this.php_js=this.php_js||{};this.php_js.pointers=this.php_js.pointers||[];var f=function(k){for(var h=0,j=this.length;h<j;h++){if(this[h]===k){return h}}return -1};var c=this.php_js.pointers;if(!c.indexOf){c.indexOf=f}if(c.indexOf(a)===-1){c.push(a,0)}var e=c.indexOf(a);var g=c[e+1];if(Object.prototype.toString.call(a)!=="[object Array]"){var d=0;for(var b in a){if(d===g+1){c[e+1]+=1;return a[b]}d++}return false}if(a.length===0||g===(a.length-1)){return false}c[e+1]+=1;return a[c[e+1]]},end:function(a){this.php_js=this.php_js||{};this.php_js.pointers=this.php_js.pointers||[];var f=function(k){for(var h=0,j=this.length;h<j;h++){if(this[h]===k){return h}}return -1};var c=this.php_js.pointers;if(!c.indexOf){c.indexOf=f}if(c.indexOf(a)===-1){c.push(a,0)}var e=c.indexOf(a);if(Object.prototype.toString.call(a)!=="[object Array]"){var d=0;for(var b in a){d++;var g=a[b]}if(d===0){return false}c[e+1]=d-1;return g}if(a.length===0){return false}c[e+1]=a.length-1;return a[c[e+1]]},function_exists:function(a){if(typeof a==="string"){a=this.window[a]}return typeof a==="function"},is_callable:function(b,a,g){var d="",e={},f="";var c=function(i){var h=(/\W*function\s+([\w\$]+)\s*\(/).exec(i);if(!h){return"(Anonymous)"}return h[1]};if(typeof b==="string"){e=this.window;f=b;d=b}else{if(typeof b==="function"){return true}else{if(Object.prototype.toString.call(b)==="[object Array]"&&b.length===2&&typeof b[0]==="object"&&typeof b[1]==="string"){e=b[0];f=b[1];d=(e.constructor&&c(e.constructor))+"::"+f}else{return false}}}if(a||typeof e[f]==="function"){if(g){this.window[g]=d}return true}return false},call_user_func_array:function(cb,parameters){var func;if(typeof cb==="string"){func=(typeof this[cb]==="function")?this[cb]:func=(new Function(null,"return "+cb))()}else{if(Object.prototype.toString.call(cb)==="[object Array]"){func=(typeof cb[0]=="string")?eval(cb[0]+"['"+cb[1]+"']"):func=cb[0][cb[1]]}else{if(typeof cb==="function"){func=cb}}}if(typeof func!=="function"){throw new Error(func+" is not a valid function");return false}if(typeof cb[0]==="string"){return func.apply(eval(cb[0]),parameters)}else{if(typeof cb[0]!=="object"){return func.apply(null,parameters)}else{return func.apply(cb[0],parameters)}}},array_slice:function(f,i,d,b){var j="";if(Object.prototype.toString.call(f)!=="[object Array]"||(b&&i!==0)){var g=0,k={};for(j in f){g+=1;k[j]=f[j]}f=k;i=(i<0)?g+i:i;d=(d===undefined)?g:((d<0)?g+d-i:d);var h={},a=false,e=-1,l=0,c=0;for(j in f){++e;if(l>=d){break}if(e==i){a=true}if(!a){continue}++l;if(this.is_int(j)&&!b){h[c++]=f[j]}else{h[j]=f[j]}}return h}if(d===undefined){return f.slice(i)}else{if(d>=0){return f.slice(i,i+d)}else{return f.slice(i,d)}}},is_int:function(a){return a===+a&&isFinite(a)&&!(a%1)},time:function(){return Math.floor(new Date().getTime()/1000)}});var ip_Hooks=new ipHooks;do_action("after_hooks_init",false,ip_Hooks);function apply_filters(a,b){return ip_Hooks.apply_filters(a,b)}function add_action(b,d,c,a){return ip_Hooks.add_action(b,d,c,a)}function do_action(){ip_Hooks.call_user_func_array([ip_Hooks,"do_action"],arguments)}function has_action(a,b){return ip_Hooks.has_action(a,b)}function did_action(a){return ip_Hooks.did_action(a)}function remove_action(a,c,b){return ip_Hooks.remove_action(a,c,b)}function makeScrollable(e,c){var e=$(e),c=$(c);e.addClass("ipAppScrollableList");c.hide();var d=$("<div class='appLoading'></div>").appendTo(e);var a=setInterval(function(){var f=c.find("img");var g=0;f.each(function(){$(this).attr("src",$(this).attr("data-src"));$(this).removeAttr("data-src");if(this.complete){g++}});if(g==f.length){clearInterval(a);setTimeout(function(){d.hide();e.css({overflow:"hidden"});c.slideDown("slow",function(){b()})},1000)}},100);function b(){var i=100;var g=e.width();var l=e.height();var j=c.outerHeight()+2*i;var k=$('<div class="appTooltip"></div>').appendTo($(".ipAppPanel")).hide(0);c.find("a.ipAppPanelItem").each(function(){$(this).data("tooltipText",this.title)});c.find("a.ipAppPanelItem").removeAttr("title");c.find("a.ipAppPanelItem img").removeAttr("alt");var h;e.on("mousemove touchscroll",function(q){h=q.target;var p=e.offset();var o=q.pageX-p.left;o=Math.min(o,g-75);var m=q.pageY-p.top-40;if(q.pageY-p.top<l/2){m=m+60}k.css({top:m,left:o});var n=(q.pageY-p.top)*(j-l)/l-i;if(n<0){n=0}e.prop({scrollTop:n})});var f=setInterval(function(){if(!h){return}var n=k.html();var m=n;if(h.nodeName=="SPAN"||h.nodeName=="IMG"){m=$(h).parents("a:first").data("tooltipText")}if(h.nodeName=="A"){m=$(h).data("tooltipText")}if(h.nodeName=="DIV"){m=$(h).find("a:first").data("tooltipText")}if(!m||m==""){k.stop(true).hide(0)}else{m=$("<div />").html(m).text()}if(n!=m){k.fadeOut(100,function(){$(this).html(m).fadeIn(100)})}},100);e.mouseleave(function(){h=false;k.stop(true).fadeOut(500,function(){$(this).text("")})})}}function add_application(a,c){var e=function(i,h){if(typeof i!=="object"||typeof h!=="object"){return false}var g={};for(var f in i){g[f]=i[f]}for(var f in h){g[f]=h[f]}return g};var d={title:"Application &mdash; "+ipgf("uniqid")(),icon:ipgo("docServer")+"ipChat/images/app-default.png",callback:{open:function(g,f){g.html('<div class="app-is-empty>Application did not configured properly</div>')},close:function(f){},resize:function(g,h,f){}},resize:true,constrain:true,minWidth:200,minHeight:200,width:300,height:300};if(typeof c==="function"){var b=e(d,ip_Chat.call_user_func_array(c));if(typeof b==="object"){b.title=ip_Chat.htmlspecialchars(b.title,1,undefined,false);ip_Chat.applications[a]=b}}};