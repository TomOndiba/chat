<?php

/**
 * @author bystwn22
 * @copyright 2013
 */

header( "Content-Type: text/html" );

require_once( dirname( __FILE__ )."/includes/conn/open.php" );
loadClass( "ipHooks", "required/hooks/hooks.class.php" );
loadClass( "ipPlugins", "plugins.class.php" );
loadClass( "ipLanguage", "lang.class.php" );
$ipLang = new ipLanguage( ilanguage() );

$page = ( isset( $_GET["p"] ) ) ? trim( strtolower( $_GET["p"] ) ) : false;
if ( !$page ) {
  return;
}

$pages  = array(
  "users"     =>  '<div data-role="page" class="pages" id="buddylist"><div data-role="header"><a href="#" class="jqm-chat-nav nav-btn" data-icon="comment" data-iconpos="notext">'.$ipLang->translate( "MESSAGES" ).'</a><h1>'.$ipLang->translate( "USERS" ).'</h1><a href="#" class="jqm-status-nav nav-btn" data-icon="false">'.$ipLang->translate( "CHAT_ON" ).'</a></div><div data-role="content"><div id="buddylist_holder"><div class="offline_show acw apl"><div style="text-align:center;"><span class="mfsl fcg">'.sprintf( $ipLang->translate( "TURN_ON_CHAT_MSG" ), '<a href="#">'.$ipLang->translate( "TURN_ON_CHAT" ).'</a>' ).'</span></div></div><div class="online_show"><div class="mCenteredLoader mCenteredLoaderVertical fcg" id="loading_indicator"><div class="_2so _2sq _2ss img _50cg" id="u_0_0"></div><span>'.$ipLang->translate( "LOADING" ).'&hellip;</span></div><div id="mobile_buddylist"></div></div></div></div></div>',
  "compose"   =>  '<div data-role="page" class="pages" id="compose"><div data-role="header"><a href="#" class="jqm-chat-nav nav-btn" data-icon="false">'.$ipLang->translate( "CANCEL" ).'</a><h1>'.$ipLang->translate( "NEW_MESSAGE" ).'</h1><a href="#" class="jqm-nav-submit nav-btn ui-disabled" data-icon="false">'.$ipLang->translate( "SEND" ).'</a></div><div data-role="content"><div class="modalDialogView aclb" id="modalDialogView"><form method="post" id="composer_form" action="#" onsubmit="return false;"><div class="_5hu7 acw"><div id="messaging_compose_error"></div><div class="_4g33 _5hu6" style="position:relative;"><div class="_4g34"><div class="_59tu touchable" id="recipient-tokenizer"><span class="_59tv xm-tokenizer-label">'.$ipLang->translate( "TO" ).'</span><span class="token-container"></span><input class="input _59tw" type="text"></div></div><div><a class="_5jby" rel="ignore" href="#" id="add-button"><i class="img _5jbz"></i></a></div></div><div id="friend-picker" style="display: none;"></div><div class="_mMessagesTouchComposer__body acw" id="text-area"><textarea class="input _5hu8" placeholder="'.$ipLang->translate( "WRITE_REPLY" ).'..." name="body" rows="5"></textarea><div class="_51s9 _5hu9"><a class="_5hua" rel="ignore"><div class="_5aqx _5hub"></div>'.$ipLang->translate( "ADD_PHOTOS" ).'<div class="_51sa"><input type="file" class="_51sb" name="photo" accept="image/*"></div></a></div><div class="_51r_ _5cqb acw"><div class="_51r_ _51s2 _51s4"><div class="_2so _2sq _2ss img _50cg async_throbber"></div><i class="_51s3 img"></i></div></div></div></div></form></div></div></div>',
  "chat"      =>  '<div data-role="page" class="pages" id="messenger"><div data-role="header"><a href="#" class="jqm-chat-nav nav-btn" data-icon="comment" data-iconpos="notext">'.$ipLang->translate( "MESSAGES" ).'</a><h1>'.$ipLang->translate( "LOADING" ).'&hellip;</h1><select class="jqm-chat-actions ui-btn-right" style="display: none;"><option value="choose" selected disabled>'.$ipLang->translate( "CHOOSE_ACTION" ).'&hellip;</option></select></div><div data-role="content" style="display: none;"><div class="acw apm"><strong><span class="mfsm">'.$ipLang->translate( "LOADING" ).'&hellip;</span></strong><span><i class="presence_icon"></i></span> <span class="fbLastActiveTimestamp mfss fcg"></span></div><div id="messageGroup"><div class="item async_elem acw" id="see_older_messages"><a class="touchable primary" href="#"><div class="primarywrap"><div class="content"><div class="title mfsm fcl"><strong><span>'.$ipLang->translate( "SEE_OLDER" ).'&hellip;</span> <div class="_2so _2sq _2ss img _50cg async_throbber async_saving_visible"></div></strong></div></div></div></a></div></div><div id="message-reply-composer" class="_50h1"><div class="async_composer" id="m-messaging-composer-container"><div class="post_placeholder carded acw apl" id="post_placeholder"><div style="text-align:center;"><div class="_2so _2sq _2ss img _50cg"></div></div></div><div class="acw apm" id="typingIndicator"><div class="ib"><i class="l img"></i><div class="c">'.sprintf( $ipLang->translate( "USER_TYPING" ), '<span>'.$ipLang->translate( "LOADING" ).'</span>' ).'&hellip;</div></div></div><div id="messaging_compose_error"></div><div class="acr apm abb" id="m-messaging-error-message" style="display: none;"><span class="mfsm"><div class="lr"><a data-role="button" class="r btn mfss touchable ui-btn-small resend-btn">'.$ipLang->translate( "RESEND" ).'</a><div>'.$ipLang->translate( "FAILED_TO_SENT_ALT" ).'</div><div class="clear"></div></div></span></div><div class="_5aqv acw abt"><div class="_51r_ _5cqb acw"><div class="_51r_ _51s2 _51s4"><div class="_2so _2sq _2ss img _50cg async_throbber async_saving_visible"></div><i class="_51s3 img"></i></div></div><div class="_4g33"><div class="_5eco"><div class="_5ecn _5d_h"><div class="_5as6"></div></div></div><div class="_5eco"><div class="_51s9"><a class="_5ecn" rel="ignore"><div class="_5aqx"></div><div class="_51sa"><input type="file" class="_51sb" name="photo" id="u_0_0" accept="image/*"></div></a></div></div><div class="_4g34 _52cq"><textarea class="input _52t1" id="composerInput" placeholder="'.$ipLang->translate( "WRITE_REPLY" ).'..." name="body" style="min-height: 50px; max-height: 200px;"></textarea></div><div><a type="submit" data-role="button" class="_52cp btn btnC mfss touchable send-btn">'.$ipLang->translate( "REPLY" ).'</a></div></div></div><div class="_5as0" style="display: none;"><div class="_5as1"><div class="ScrollResponderTouchContainer _5ash"><div class="ScrollResponderScroller"><div class="_5ef_"></div></div></div></div><div class="ScrollResponderTouchContainer _5as2"><div class="ScrollResponderScroller"><a class="_5cni" href="#"><span class="_5b3-"></span></a><div class="_5as5"></div></div></div></div></div></div></div></div>',
  "messages"  =>  '<div data-role="page" class="pages" id="messages"><div data-role="header"><a href="#" class="jqm-users-nav nav-btn" data-icon="user" data-iconpos="notext">'.$ipLang->translate( "USERS" ).'</a><h1>'.$ipLang->translate( "MESSAGES" ).'</h1></div><div data-role="content"></div></div>',
  "error"     =>  '<div data-role="page" class="tempLoading" id="tempLoading"><div data-role="header"><h1>'.$ipLang->translate( "ERROR" ).'</h1></div><div data-role="content"><div id="mErrorView" class="mErrorViewInstance"><div class="container"><div class="image"></div><div class="message">'.$ipLang->translate( "UNABLE_TO_CONNECT" ).'</div><a class="link">'.$ipLang->translate( "FEATURE_NOT_AVAIL" ).'</a></div></div></div></div>'
);

echo ( isset( $pages[$page] ) ) ? $pages[$page] : $pages["error"];

?>